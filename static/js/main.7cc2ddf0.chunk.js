(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){},12:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2zQUu",ImageGallery_container:"ImageGallery_ImageGallery_container__2CD0K"}},13:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2XXks",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__IudHd"}},14:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3rluN",Modal:"Modal_Modal__1g6hY"}},17:function(e,t,a){e.exports={Button:"Button_Button__3aj6O"}},23:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(3),c=a.n(o),s=(a(23),a(15)),l=a(4),i=a(5),h=a(7),m=a(6),u=a(11),d=a.n(u),g=a(9),j=(a(24),a(18)),b=a(8),p=a.n(b),f=a(1),_=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchName:""},e.handleChange=function(t){e.setState({searchName:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.searchName.trim()?(e.props.onSubmit(e.state.searchName),e.resetForm()):g.b.warn("Enter a search name")},e.resetForm=function(){e.setState({searchName:""})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(f.jsx)("header",{className:p.a.Searchbar,children:Object(f.jsxs)("form",{onSubmit:this.handleSubmit,className:p.a.SearchForm,children:[Object(f.jsxs)("button",{type:"submit",className:p.a.SearchForm_button,children:[Object(f.jsx)(j.a,{}),Object(f.jsx)("span",{className:p.a.SearchFormButton_label,children:"Search"})]}),Object(f.jsx)("input",{className:p.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchName,onChange:this.handleChange})]})})}}]),a}(n.Component),I=a(16),O=a.n(I);var y={fetchImage:function(e,t){return console.log(t),fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=23204413-d213403835507960634485f04&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("There is no information for this query ".concat(e)))}))}},v=a(12),S=a.n(v),x=a(13),C=a.n(x),k=function(e){var t=e.id,a=e.src,n=e.largeImg,r=e.onClick,o=e.onImgClick;return Object(f.jsx)("li",{className:C.a.ImageGalleryItem,onClick:r,children:Object(f.jsx)("img",{onClick:o,className:C.a.ImageGalleryItem_image,src:a,alt:"","data-url":n})},t)},N=function(e){var t=e.images,a=e.onClick,n=e.onImgClick;return Object(f.jsx)("div",{className:S.a.ImageGallery_container,children:Object(f.jsx)("ul",{className:S.a.ImageGallery,children:t.map((function(e){return Object(f.jsx)(k,{onClick:a,onImgClick:n,src:e.webformatURL,largeImg:e.largeImageURL},e.id)}))})})},w=a(17),F=a.n(w),M=function(e){var t=e.onClick;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("button",{type:"button",onClick:t,className:F.a.Button,children:"Load more"})})},G=a(14),E=a.n(G),B=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleEscape=function(t){"Escape"===t.code&&e.props.onCloseModal(),console.log("Escape"===t.code)},e.handleClose=function(t){t.currentTarget===t.target&&e.props.onCloseModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape)}},{key:"render",value:function(){var e=this.props.children;return Object(o.createPortal)(Object(f.jsx)("div",{className:E.a.Overlay,onClick:this.handleClose,children:Object(f.jsx)("div",{className:E.a.Modal,children:e})}),document.getElementById("modalRoot"))}}]),a}(n.Component),U=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchName:"",searchInfo:[],error:null,status:"idle",searchPage:1,showModal:!1,largeImgUrl:""},e.handleFormSubmit=function(t){e.setState({searchName:t})},e.handleClick=function(){e.fetchFunction(),console.log(e.state.searchInfo.length)},e.fetchFunction=function(){return y.fetchImage(e.state.searchName,e.state.searchPage).then((function(t){e.setState({searchInfo:[].concat(Object(s.a)(e.state.searchInfo),Object(s.a)(t.hits)),status:"resolved"}),e.setState((function(e){return{searchPage:e.searchPage+1}}))})).catch((function(t){return e.setState({error:t,status:"rejected"})}))},e.onCloseModal=function(){e.setState({showModal:!1})},e.onOpenModal=function(){e.setState({showModal:!0})},e.onImgClick=function(t){console.log(t.target.dataset),"IMG"===t.target.nodeName&&e.setState({largeImgUrl:t.target.dataset.url})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.state.searchInfo.length>12&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),t.searchName!==this.state.searchName&&(this.setState({searchPage:1}),this.setState({status:"pending"}),this.setState({searchInfo:[]}),this.fetchFunction())}},{key:"render",value:function(){var e=this.state,t=e.searchInfo,a=e.error,n=e.status,r=e.showModal,o=e.largeImgUrl;return Object(f.jsxs)("div",{className:d.a.App,children:[Object(f.jsx)(_,{onSubmit:this.handleFormSubmit}),r&&Object(f.jsx)(B,{onCloseModal:this.onCloseModal,children:Object(f.jsx)("img",{src:o,alt:""})}),Object(f.jsx)(g.a,{position:"top-center",autoClose:2e3}),"idle"===n&&Object(f.jsx)("div",{children:"Enter a search name"}),"pending"===n&&Object(f.jsx)(O.a,{type:"BallTriangle",color:"#00BFFF",height:100,width:100,timeout:3e3}),"rejected"===n&&Object(f.jsx)("h1",{children:a.message}),"resolved"===n&&t.length>0&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(N,{images:t,onClick:this.onOpenModal,onImgClick:this.onImgClick}),Object(f.jsx)(M,{onClick:this.handleClick})]})]})}}]),a}(r.a.Component),P=U;c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__2vYEt",SearchForm:"Searchbar_SearchForm__vlWvG",SearchForm_button:"Searchbar_SearchForm_button__1QRgj",SearchFormButton_label:"Searchbar_SearchFormButton_label__3ywVo",SearchForm_input:"Searchbar_SearchForm_input__1VvIM"}}},[[46,1,2]]]);
//# sourceMappingURL=main.7cc2ddf0.chunk.js.map